<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<meta name="description" content="<strong>The ALAN IF Conversion Guide</strong>&#8201;&#8212;&#8201;How to convert text-adventures from the ALAN Adventure programming language v2 to v3.">
<meta name="keywords" content="alan, if, interactive fiction, game, text adventures, programming">
<meta name="author" content="Thomas Nilefalk">
<title>The ALAN Adventure Language: Conversion Guide from v2 to v3</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge {
  color: #faf6e4;
  background-color: #122b3b;
}
pre.rouge .gl {
  color: #dee5e7;
  background-color: #4e5d62;
}
pre.rouge .gp {
  color: #a8e1fe;
  font-weight: bold;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cm, pre.rouge .cpf, pre.rouge .c1, pre.rouge .cs {
  color: #6c8b9f;
  font-style: italic;
}
pre.rouge .cp {
  color: #b2fd6d;
  font-weight: bold;
}
pre.rouge .err {
  color: #fefeec;
  background-color: #cc0000;
}
pre.rouge .gr {
  color: #cc0000;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .k, pre.rouge .kd, pre.rouge .kv {
  color: #f6dd62;
  font-weight: bold;
}
pre.rouge .o, pre.rouge .ow {
  color: #4df4ff;
  font-weight: bold;
}
pre.rouge .p, pre.rouge .pi {
  color: #4df4ff;
}
pre.rouge .gd {
  color: #cc0000;
}
pre.rouge .gi {
  color: #b2fd6d;
}
pre.rouge .ge {
  font-style: italic;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gt {
  color: #dee5e7;
  background-color: #4e5d62;
}
pre.rouge .kc {
  color: #f696db;
  font-weight: bold;
}
pre.rouge .kn {
  color: #ffb000;
  font-weight: bold;
}
pre.rouge .kp {
  color: #ffb000;
  font-weight: bold;
}
pre.rouge .kr {
  color: #ffb000;
  font-weight: bold;
}
pre.rouge .gh {
  color: #ffb000;
  font-weight: bold;
}
pre.rouge .gu {
  color: #ffb000;
  font-weight: bold;
}
pre.rouge .kt {
  color: #b2fd6d;
  font-weight: bold;
}
pre.rouge .no {
  color: #b2fd6d;
  font-weight: bold;
}
pre.rouge .nc {
  color: #b2fd6d;
  font-weight: bold;
}
pre.rouge .nd {
  color: #b2fd6d;
  font-weight: bold;
}
pre.rouge .nn {
  color: #b2fd6d;
  font-weight: bold;
}
pre.rouge .bp {
  color: #b2fd6d;
  font-weight: bold;
}
pre.rouge .ne {
  color: #b2fd6d;
  font-weight: bold;
}
pre.rouge .nl {
  color: #ffb000;
  font-weight: bold;
}
pre.rouge .nt {
  color: #ffb000;
  font-weight: bold;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mf, pre.rouge .mh, pre.rouge .mi, pre.rouge .il, pre.rouge .mo, pre.rouge .mx {
  color: #f696db;
  font-weight: bold;
}
pre.rouge .ld {
  color: #f696db;
  font-weight: bold;
}
pre.rouge .ss {
  color: #f696db;
  font-weight: bold;
}
pre.rouge .s, pre.rouge .sb, pre.rouge .dl, pre.rouge .sd, pre.rouge .s2, pre.rouge .sh, pre.rouge .sx, pre.rouge .sr, pre.rouge .s1 {
  color: #fff0a6;
  font-weight: bold;
}
pre.rouge .sa {
  color: #f6dd62;
  font-weight: bold;
}
pre.rouge .se {
  color: #4df4ff;
  font-weight: bold;
}
pre.rouge .sc {
  color: #4df4ff;
  font-weight: bold;
}
pre.rouge .si {
  color: #4df4ff;
  font-weight: bold;
}
pre.rouge .nb {
  font-weight: bold;
}
pre.rouge .ni {
  color: #999999;
  font-weight: bold;
}
pre.rouge .w {
  color: #BBBBBB;
}
pre.rouge .go {
  color: #BBBBBB;
}
pre.rouge .nf, pre.rouge .fm {
  color: #a8e1fe;
}
pre.rouge .py {
  color: #a8e1fe;
}
pre.rouge .na {
  color: #a8e1fe;
}
pre.rouge .nv, pre.rouge .vc, pre.rouge .vg, pre.rouge .vi, pre.rouge .vm {
  color: #a8e1fe;
  font-weight: bold;
}
</style>
<style>
/* Alan Code Notation Mockup */
.listingblock.alan pre {
  color: #333333;
  background: #F8F8F8;
}

/* Shell/CMD */
div.literalblock.shell pre {
  background-color: #0C0C0C;
  color: #F2F2F2;
}
div.literalblock.shell pre .conum {
  background: #FFF945 !important;
  color: #0C0C0C !important;
}

/* Game Transcripts */
.exampleblock.gametranscript > .content {
  background: #F7FDFF;
  color: #0089B6;
  border-color: #CCF2FF;
}

/* Commentary Blocks */
div.openblock.commentary {
  padding-left: 6em;
}

/* Inline Highlighting */
span.green {
  background-color: #A3FF8A;
}

/* Highlight Theme for Alan -- based on "github.com style" for highlight.js, by Vasily Polovnyov */
.listingblock code[data-lang=alan]::before {
  color: #A09F93;
}

.listingblock pre[class~=rouge][lang=alan] {
  background-color: #F8F8F8;
  border-radius: 4px;
  border: 1px solid #F8F8F8;
}
.listingblock pre[class~=rouge][lang=alan] > code {
  color: #333333;
  font-family: inherit;
  font-size: inherit;
}
.listingblock pre[class~=rouge][lang=alan] > code > span {
  font-style: normal;
  font-weight: normal;
}
.listingblock pre[class~=rouge][lang=alan] > code > span > .conum[data-value] {
  background: black !important;
  color: white !important;
}
.listingblock pre[class~=rouge][lang=alan] > code > span.m {
  color: #333333;
}
.listingblock pre[class~=rouge][lang=alan] > code > span.lin {
  color: #999988;
}
.listingblock pre[class~=rouge][lang=alan] > code > span.n {
  color: #333333;
}
.listingblock pre[class~=rouge][lang=alan] > code > span.o {
  color: #333333;
}
.listingblock pre[class~=rouge][lang=alan] > code > span.p {
  color: #990000;
}
.listingblock pre[class~=rouge][lang=alan] > code > span.dl {
  color: #008080;
}
.listingblock pre[class~=rouge][lang=alan] > code > span.s2 {
  color: #008080;
}
.listingblock pre[class~=rouge][lang=alan] > code > span.s1 {
  color: #008080;
}
.listingblock pre[class~=rouge][lang=alan] > code > span.se {
  color: #FF980B;
}
.listingblock pre[class~=rouge][lang=alan] > code > span.si {
  color: #D572F1;
}
.listingblock pre[class~=rouge][lang=alan] > code > span.c1 {
  color: #999988;
}
.listingblock pre[class~=rouge][lang=alan] > code > span.cm {
  color: #999988;
}
.listingblock pre[class~=rouge][lang=alan] > code > span.kr {
  color: #990000;
}
.listingblock pre[class~=rouge][lang=alan] > code > span.nb {
  color: #000080;
}
.listingblock pre[class~=rouge][lang=alan] > code > span.nx {
  color: #000080;
}
.listingblock pre[class~=rouge][lang=alan] > code mark {
  background-color: #CCFF00;
  background-image: linear-gradient(to right, #CCFF00 0%, #F5FF87 100%);
}
.listingblock pre[class~=rouge][lang=alan] > code span.green {
  background-color: #A3FF8A;
  background-image: linear-gradient(to right, #A3FF8A 0%, rgba(163, 255, 138, 0.5) 100%);
}

/* Rouge Theme for Alan Library -- Base16 Eighties, by Chris Kempson */
.listingblock.lib code[data-lang=alan]::before {
  color: #A09F93;
}

.listingblock.lib pre[class~=rouge][lang=alan] {
  background-color: #2D2D2D;
  border-radius: 4px;
  border: 1px solid #A09F93;
}
.listingblock.lib pre[class~=rouge][lang=alan] > code {
  color: #D3D0C8;
  font-family: inherit;
  font-size: inherit;
}
.listingblock.lib pre[class~=rouge][lang=alan] > code > span {
  font-style: normal;
  font-weight: normal;
}
.listingblock.lib pre[class~=rouge][lang=alan] > code > span > .conum[data-value] {
  background: white !important;
  color: black !important;
}
.listingblock.lib pre[class~=rouge][lang=alan] > code > span.m {
  color: #F99157;
}
.listingblock.lib pre[class~=rouge][lang=alan] > code > span.lin {
  color: #747369;
}
.listingblock.lib pre[class~=rouge][lang=alan] > code > span.n {
  color: #D3D0C8;
}
.listingblock.lib pre[class~=rouge][lang=alan] > code > span.o {
  color: #D3D0C8;
}
.listingblock.lib pre[class~=rouge][lang=alan] > code > span.p {
  color: #F2777A;
}
.listingblock.lib pre[class~=rouge][lang=alan] > code > span.dl {
  color: #008080;
}
.listingblock.lib pre[class~=rouge][lang=alan] > code > span.s2 {
  color: #99CC99;
}
.listingblock.lib pre[class~=rouge][lang=alan] > code > span.s1 {
  color: #99CC99;
}
.listingblock.lib pre[class~=rouge][lang=alan] > code > span.se {
  color: #F99157;
}
.listingblock.lib pre[class~=rouge][lang=alan] > code > span.si {
  color: #D27B53;
}
.listingblock.lib pre[class~=rouge][lang=alan] > code > span.c1 {
  color: #999988;
}
.listingblock.lib pre[class~=rouge][lang=alan] > code > span.cm {
  color: #999988;
}
.listingblock.lib pre[class~=rouge][lang=alan] > code > span.kr {
  color: #F2777A;
}
.listingblock.lib pre[class~=rouge][lang=alan] > code > span.nb {
  color: #FFCC66;
}
.listingblock.lib pre[class~=rouge][lang=alan] > code > span.nx {
  color: #6699CC;
}
.listingblock.lib pre[class~=rouge][lang=alan] > code mark {
  background-color: #CCFF00;
  background-image: linear-gradient(to right, #CCFF00 0%, #F5FF87 100%);
}
.listingblock.lib pre[class~=rouge][lang=alan] > code span.green {
  background-color: #A3FF8A;
  background-image: linear-gradient(to right, #A3FF8A 0%, rgba(163, 255, 138, 0.5) 100%);
}

/* Rouge Theme for Alan tutorial -- Base16 Google, by Seth Wright */
.listingblock.tutorial code[data-lang=alan]::before {
  color: #A09F93;
}

.listingblock.tutorial pre[class~=rouge][lang=alan] {
  background-color: #FFFFFF;
  border-radius: 4px;
  border: 1px solid #E0E0E0;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code {
  color: #373B41;
  font-family: inherit;
  font-size: inherit;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code > span {
  font-style: normal;
  font-weight: normal;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code > span > .conum[data-value] {
  background: black !important;
  color: white !important;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code > span.m {
  color: #373B41;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code > span.lin {
  color: #C5C8C6;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code > span.n {
  color: #373B41;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code > span.o {
  color: #373B41;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code > span.p {
  color: #CC342B;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code > span.dl {
  color: #198844;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code > span.s2 {
  color: #198844;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code > span.s1 {
  color: #198844;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code > span.se {
  color: #F96A38;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code > span.si {
  color: #3971ED;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code > span.c1 {
  color: #969896;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code > span.cm {
  color: #969896;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code > span.kr {
  color: #CC342B;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code > span.nb {
  color: #FBA922;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code > span.nx {
  color: #3971ED;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code mark {
  background-color: #F5FF87;
  background-image: none;
}
.listingblock.tutorial pre[class~=rouge][lang=alan] > code span.green {
  background-color: #dbf8e6;
  background-image: none;
}

/* BNF */
pre[lang=bnf] {
  background: #FFEBD6;
}
pre[lang=bnf] > code.language-bnf[data-lang=bnf] {
  color: #492E11;
  background: #FFEBD6;
}

/*# sourceMappingURL=rouge.css.map */
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>The ALAN Adventure Language: Conversion Guide from v2 to v3</h1>
<div class="details">
<span id="author" class="author">Thomas Nilefalk</span><br>
<span id="email" class="email"><a href="mailto:thomas@alanif.se">thomas@alanif.se</a></span><br>
<span id="revnumber">alan 3.0beta2</span>
<br><span id="revremark">New AsciiDoc Reprint</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#purpose_of_the_guide">1.1. Purpose of the Guide</a></li>
</ul>
</li>
<li><a href="#porting_strategy">2. Porting Strategy</a></li>
<li><a href="#the_little_words">3. The Little Words</a>
<ul class="sectlevel2">
<li><a href="#names_and_capitalization">3.1. Names and Capitalization</a></li>
</ul>
</li>
<li><a href="#objects_actors_and_locations">4. Objects, Actors and Locations</a>
<ul class="sectlevel2">
<li><a href="#declarations">4.1. Declarations</a></li>
<li><a href="#default_attributes">4.2. Default Attributes</a></li>
<li><a href="#articles">4.3. Articles</a></li>
<li><a href="#containers">4.4. Containers</a></li>
<li><a href="#pronouns">4.5. Pronouns</a></li>
</ul>
</li>
<li><a href="#verbs_and_syntax">5. Verbs and Syntax</a>
<ul class="sectlevel2">
<li><a href="#global_verbs">5.1. Global Verbs</a></li>
<li><a href="#verbs_in_locations">5.2. Verbs in Locations</a></li>
<li><a href="#syntax_and_syntax_restrictions">5.3. Syntax and Syntax Restrictions</a></li>
<li><a href="#syntax_synonyms">5.4. Syntax Synonyms</a></li>
</ul>
</li>
<li><a href="#rules">6. Rules</a></li>
<li><a href="#expressions">7. Expressions</a>
<ul class="sectlevel2">
<li><a href="#the_location_object_actor_variables">7.1. The LOCATION, OBJECT &amp; ACTOR Variables</a></li>
<li><a href="#aggregates">7.2. Aggregates</a></li>
</ul>
</li>
<li><a href="#miscellanea">8. Miscellanea</a>
<ul class="sectlevel2">
<li><a href="#scripts">8.1. Scripts</a></li>
<li><a href="#multimedia">8.2. Multimedia</a></li>
<li><a href="#include_directive">8.3. Include directive</a></li>
<li><a href="#messages">8.4. Messages</a></li>
<li><a href="#new_features">8.5. New Features</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Text adventures or, using a more appropriate term, interactive fiction, is a form of computer game which has many things in common with fiction in book form, role-playing games and puzzle-solving.
To create a high quality inter­active fiction game, you need to be more of an author than a games program­mer.</p>
</div>
<div class="paragraph">
<p>Alan is a special purpose computer language specifically designed to make it very easy to create such adventure games requiring only limited programming skills.</p>
</div>
<div class="paragraph">
<p>The author and a very good friend designed the first version of the Alan language in 1985.
During many years of incremental improvement, it has now reached its third major version.
This means that the lan­guage has a sound foundation, based on practical use.
Therefore, features have been added as experience has grown from actual use and understanding of the most prioritised needs.</p>
</div>
<div class="sect2">
<h3 id="purpose_of_the_guide"><a class="anchor" href="#purpose_of_the_guide"></a>1.1. Purpose of the Guide</h3>
<div class="paragraph">
<p>This document tries to give help and advice for those that attempt to port version 2 Alan games to version 3.
Although not exactly trivial, it can be rather straightforward and is in not so complicated that it should not be attempted.
On the contrary, the author believes that for most games it is simple, but perhaps a bit tedious.
The use of some (mis-) features of version 2 can give rise to trouble and these features are listed here together with possible ways to minimize work or work around the problem or even possible well structured rewrites.</p>
</div>
<div class="paragraph">
<p>A complete package of the Alan Development System v3 should include a crude converter program which can do a lot of the grunt work for you.
The source code for that converter is available.</p>
</div>
<div class="paragraph">
<p>Some expressions in this guide might be difficult to grasp if you are just starting out with Alan v3.
Don&#8217;t hesitate to
<a href="mailto:thomas@alanif.se" title="write an email to Thomas Nilefalk">contact the author</a>, or the
<a href="https://groups.google.com/g/alan-if/" title="Alan IF discussions at Google Groups" target="_blank" rel="noopener">Alan mailing list</a>, to get some answers to your questions.
Likewise, if you have successfully ported a game, and particularly if you discovered an error in this guide, or even better, found a new tip, we&#8217;d like to hear from you!</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="porting_strategy"><a class="anchor" href="#porting_strategy"></a>2. Porting Strategy</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Real life has taught this author one lesson: do it bitwise, little by little, one step at a time, even a long journey starts with a small step, &#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Start by running your game in a V2 environment.
Log the output to a file.
While doing this, input any command you can think of.
Abuse your game.
Ask your evil brother to type some commands.
Play it to the end.</p>
</div>
<div class="paragraph">
<p>Now you have a good starting point:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A sequence of commands</p>
</li>
<li>
<p>A log of the exact output of your game given that input</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Copy your game to a new location.
Start by running the converter program.
It will do the bulk of the straightforward conversions for you.
Compile the converted source.
Get chocked over the number of errors.
Note the number.
Pick a section below or an error message in the source, and try to address that by changing the corresponding code.
Compile it again.
Note the number of errors.
Any progress?
Good.
Repeat.</p>
</div>
<div class="paragraph">
<p>Once you have a running game, run it in a V3 environment.
Log the game output.
Input the exact same commands as above.
Compare the output.
Different?
If not, you are done already!
Else, you have some debugging to do.
Consult the following chapters again.
Found anything?
Fix it and run again.
Progress!
If not, look for appropriate sections in the reference manual, possibly compare it with a v2.x manual.
When finally the output of your game is the same as it was in the V2 log, you are done!
Well done!</p>
</div>
<div class="paragraph">
<p>I repeat, <em>don&#8217;t think you can do it by hacking along</em>.
Don&#8217;t be tempted to change that little spelling mistake, or add that button to the television set.
IT WILL RUIN YOUR BASELINE!
I.e. you will have nothing to compare it with any longer.
Instead, jot down that idea on a piece of paper as a memo for future action.</p>
</div>
<div class="paragraph">
<p>Take it easy.
Save a new backup copy every time you have made progress&#8201;&#8212;&#8201;and that&#8217;s <em>every time</em>.
(File versioning software is a blessing.)
Eventually you will get there.</p>
</div>
<div class="paragraph">
<p>By the way, this strategy applies not only to porting Alan games.
It applies to all development, this is how Alan v3 was possible; in fact, it applies to the whole life of this author now&#8230;&#8203;</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the_little_words"><a class="anchor" href="#the_little_words"></a>3. The Little Words</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are a couple of new, reserved, words in Alan version&#160;3.
These might cause compiler errors if they were to be used in old sources.
This usually occurs because they are used in location names without quotes.
The most common problematic words are <code>THE</code> and <code>EVERY</code>.</p>
</div>
<div class="paragraph">
<p>The simple and usually correct change is to quote them.
E.g.</p>
</div>
<div class="literalblock alan2">
<div class="content">
<pre>Location l Name Outside the house</pre>
</div>
</div>
<div class="paragraph">
<p>Needs to be converted to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" lang="alan"><code class="language-alan" data-lang="alan"><span class="kr">The</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="kr">Isa</span><span class="w"> </span><span class="nb">location</span><span class="w"> </span><span class="kr">Name</span><span class="w"> </span><span class="n">Outside</span><span class="w"> </span><span class="n">'the'</span><span class="w"> </span><span class="n">house</span><span class="p">.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or even</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" lang="alan"><code class="language-alan" data-lang="alan"><span class="kr">The</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="kr">Isa</span><span class="w"> </span><span class="nb">location</span><span class="w"> </span><span class="kr">Name</span><span class="w"> </span><span class="n">'Outside the House'</span><span class="p">.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Do you remember that a location name can be a single quoted identifier?</p>
</div>
<div class="sect2">
<h3 id="names_and_capitalization"><a class="anchor" href="#names_and_capitalization"></a>3.1. Names and Capitalization</h3>
<div class="paragraph">
<p>Alan V3 has rethought the handling of names, identifiers etc.
V2 converted everything to lower case and used that in the game.
This caused many problems with actor names and in other cases where you wanted your output to be edited in a special way.</p>
</div>
<div class="paragraph">
<p>In V3 you can use any case in a name or identifier and that will be preserved.
Comparisons are done in a case insensitive way, in both the compiler and the interpreter.
This means that you can give the actor a real name with leading capitals and that name will be used in the game output.
The player will still be able to input lower case and it will match.</p>
</div>
<div class="paragraph">
<p>This does away with many occasions where quoted identifiers had to be used together with multiple names to achieve the desired output while keeping the possibility for the player to refer to the items.</p>
</div>
<div class="paragraph">
<p>When converting a V2 game, look out especially for location and actor names, since these where automatically capitalized.
Also, note that the first occurrence of a word will define its capitalization, which includes names of locations.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You might have used capitalization on common words that should not be capitalized, solve this by quoting the complete location name.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="objects_actors_and_locations"><a class="anchor" href="#objects_actors_and_locations"></a>4. Objects, Actors and Locations</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="declarations"><a class="anchor" href="#declarations"></a>4.1. Declarations</h3>
<div class="paragraph">
<p>Alan v2 had three built-in entities, or classes.
These where built in also into the language.
V3 has generalized this into the class structure and the pre-defined classes documented in this manual.</p>
</div>
<div class="paragraph">
<p>The conversion is tedious but straight-forward (Emacsophiles can probably hack out an elisp-macro):</p>
</div>
<div class="literalblock alan2">
<div class="content">
<pre>OBJECT o ...
:::
END OBJECT o.</pre>
</div>
</div>
<div class="paragraph">
<p>Should be translated into</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" lang="alan"><code class="language-alan" data-lang="alan"><span class="kr">The</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="kr">Isa</span><span class="w"> </span><span class="nb">object</span><span class="w"> </span><span class="p">...</span><span class="w">
</span><span class="p">:::</span><span class="w">
</span><span class="kr">End</span><span class="w"> </span><span class="kr">The</span><span class="w"> </span><span class="n">o</span><span class="p">.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The conversion is analogous for actors and locations.</p>
</div>
<div class="paragraph">
<p>The converter program that is available, will do this automatically for you.</p>
</div>
</div>
<div class="sect2">
<h3 id="default_attributes"><a class="anchor" href="#default_attributes"></a>4.2. Default Attributes</h3>
<div class="paragraph">
<p>Version 2 allowed attributes to be given to all objects, all actors, all locations or all of these.
This was done using the <code>DEFAULT ATTRIBUTES</code>, <code>DEFAULT OBJECT ATTRIBUTES</code>, <code>DEFAULT ACTOR ATTRIBUTES</code> and <code>DEFAULT LOCATION ATTRIBUTES</code> respectively.</p>
</div>
<div class="paragraph">
<p>The new classing mechanism of Alan v3 solves this in a much more flexible way by allowing adding attributes on <em>any</em> level in the class hierarchy.
You can still add properties, including the special case of attributes, to a class after its definition (to aid in definition of libraries and other general extensions).</p>
</div>
<div class="literalblock alan2">
<div class="content">
<pre>DEFAULT ATTRIBUTES human. NOT plural.
:
DEFAULT OBJECT ATTRIBUTES moveable.
:
DEFAULT ACTOR ATTRIBUTES real_name.
:
DEFAULT OBJECT ATTRIBUTES size 0.</pre>
</div>
</div>
<div class="paragraph">
<p>The above sequence illustrates the common practice in v2 to add attributes to the various pseudo-classes, and do it in a piece-meal fashion, usually in connection with the definition of some verbs.
The above can easily (simple-mindedly) be translated into v3:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" lang="alan"><code class="language-alan" data-lang="alan"><span class="kr">Add</span><span class="w"> </span><span class="kr">To</span><span class="w"> </span><span class="kr">Every</span><span class="w"> </span><span class="nb">thing</span><span class="w"> </span><span class="kr">Is</span><span class="w"> </span><span class="n">Human</span><span class="p">.</span><span class="w"> </span><span class="kr">Not</span><span class="w"> </span><span class="n">plural</span><span class="p">.</span><span class="w"> </span><span class="kr">End</span><span class="w"> </span><span class="kr">Add</span><span class="w"> </span><span class="kr">To</span><span class="p">.</span><span class="w">

</span><span class="kr">Add</span><span class="w"> </span><span class="kr">To</span><span class="w"> </span><span class="kr">Every</span><span class="w"> </span><span class="nb">object</span><span class="w"> </span><span class="kr">Is</span><span class="w"> </span><span class="n">moveable</span><span class="p">.</span><span class="w"> </span><span class="kr">End</span><span class="w"> </span><span class="kr">Add</span><span class="w"> </span><span class="kr">To</span><span class="p">.</span><span class="w">

</span><span class="kr">Add</span><span class="w"> </span><span class="kr">To</span><span class="w"> </span><span class="kr">Every</span><span class="w"> </span><span class="nb">actor</span><span class="w"> </span><span class="kr">Has</span><span class="w"> </span><span class="n">real_name</span><span class="p">.</span><span class="w"> </span><span class="kr">End</span><span class="w"> </span><span class="kr">Add</span><span class="w"> </span><span class="kr">To</span><span class="p">.</span><span class="w">

</span><span class="kr">Add</span><span class="w"> </span><span class="kr">To</span><span class="w"> </span><span class="kr">Every</span><span class="w"> </span><span class="nb">object</span><span class="w"> </span><span class="kr">Has</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="w"> </span><span class="kr">End</span><span class="w"> </span><span class="kr">Add</span><span class="w"> </span><span class="kr">To</span><span class="p">.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that, in V3, you can add all properties, not only attributes, to a class after its definition.</p>
</div>
</div>
<div class="sect2">
<h3 id="articles"><a class="anchor" href="#articles"></a>4.3. Articles</h3>
<div class="paragraph">
<p>Alan v2 allowed the indefinite article to be modified by the author.
Indefinite articles were used in listing of containers and default listings of a location, for example.</p>
</div>
<div class="paragraph">
<p>In V3, the article mechanism has been extended to also include definite articles and, to support languages where also the form of the noun changes, the <code>Definite</code>/<code>Indefinite Form</code> has been introduced.
This, in conjunction with the new forms of the <code>Say</code> statement, to indicate definite or indefinite form (<code>Say The x.</code>/<code>Say An x.</code>), allows more control over the presentation of instances.
E.g. it is possible to always use the <code>Say The</code> form in the printout and let the instance or class handle how to print this instance in definite form.
An example would be actors with proper names who usually do not want a definite article in front of their name.</p>
</div>
<div class="paragraph">
<p>You should also look for embedded parameter references in strings (<code>"You xxx the $o."</code> etc.).
These should be changed to use the new embedded definite and indefinite form printout, <code>"You xxx $+1."</code>, or even better, to the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" lang="alan"><code class="language-alan" data-lang="alan"><span class="dl">"</span><span class="s2">You xxx</span><span class="dl">"</span><span class="w"> </span><span class="kr">Say</span><span class="w"> </span><span class="kr">The</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="w"> </span><span class="dl">"</span><span class="s2">.</span><span class="dl">"</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="containers"><a class="anchor" href="#containers"></a>4.4. Containers</h3>
<div class="paragraph">
<p>Version 2 and earlier allowed &#8220;pure&#8221; containers, i.e. entities that where only containers.
In early versions, this was the only kind of container and you had to connect that container to the object or actor by statements.
In v2.8, you could add the container property to both actors and locations.</p>
</div>
<div class="paragraph">
<p>Version 3 does not support &#8220;pure&#8221; containers.
One common use was the inventory of the hero.
This old style inventory handling will have to be converted to use of the built in container property of the hero.
E.g.</p>
</div>
<div class="literalblock alan2">
<div class="content">
<pre>CONTAINER inventory
HEADER "You are carrying"
EMPTY "You are empty-handed."
END CONTAINER inventory.

...

VERB take
DOES
LOCATE o IN inventory.
END VERB take.</pre>
</div>
</div>
<div class="paragraph">
<p>Will have to be converted to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" lang="alan"><code class="language-alan" data-lang="alan"><span class="kr">The</span><span class="w"> </span><span class="nx">hero</span><span class="w"> </span><span class="kr">Isa</span><span class="w"> </span><span class="nb">actor</span><span class="w">
</span><span class="kr">Container</span><span class="w"> </span><span class="c1">-- the inventory</span><span class="w">
</span><span class="kr">Header</span><span class="w"> </span><span class="dl">"</span><span class="s2">You are carrying</span><span class="dl">"</span><span class="w">
</span><span class="kr">Empty</span><span class="w"> </span><span class="dl">"</span><span class="s2">You are empty-handed.</span><span class="dl">"</span><span class="w">
</span><span class="kr">End</span><span class="w"> </span><span class="kr">The</span><span class="w"> </span><span class="nx">hero</span><span class="p">.</span><span class="w">
</span><span class="p">...</span><span class="w">

</span><span class="kr">Verb</span><span class="w"> </span><span class="n">take</span><span class="w">
</span><span class="kr">Does</span><span class="w">
</span><span class="kr">Locate</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="kr">In</span><span class="w"> </span><span class="nx">hero</span><span class="p">.</span><span class="w">
</span><span class="kr">End</span><span class="w"> </span><span class="kr">Verb</span><span class="w"> </span><span class="n">take</span><span class="p">.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Pure containers were also sometimes used to collect items that should always be where the hero is.
Since pure containers are no longer supported this has to be implemented in another way.</p>
</div>
<div class="paragraph">
<p>An instance of the predefined class <code>entity</code> does not have the properties of objects and actors, such as the properties of having a location and being described.
Therefore, you could declare an instance like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" lang="alan"><code class="language-alan" data-lang="alan"><span class="kr">The</span><span class="w"> </span><span class="n">air</span><span class="w"> </span><span class="kr">Isa</span><span class="w"> </span><span class="nb">entity</span><span class="w"> </span><span class="c1">-- note: inheriting directly from entity</span><span class="w">
</span><span class="kr">Container</span><span class="w">
</span><span class="kr">End</span><span class="w"> </span><span class="kr">The</span><span class="w"> </span><span class="n">air</span><span class="p">.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This container will be available at all locations but it will never be described so it can be used in the same way as pure containers in version 2.</p>
</div>
<div class="paragraph">
<p>An alternative is to make the things that should be always available inherit from <code>entity</code> themselves.
This will make all of them available at all times.</p>
</div>
</div>
<div class="sect2">
<h3 id="pronouns"><a class="anchor" href="#pronouns"></a>4.5. Pronouns</h3>
<div class="paragraph">
<p>In V2, the language itself defined a few pronouns.
V3 allows an author to take control over handling of pronouns.
This should however, make little difference when porting a V2 game.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="verbs_and_syntax"><a class="anchor" href="#verbs_and_syntax"></a>5. Verbs and Syntax</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="global_verbs"><a class="anchor" href="#global_verbs"></a>5.1. Global Verbs</h3>
<div class="paragraph">
<p>In version 2, global verbs had the semantics of being a generalization of verbs inside objects&#8201;&#8212;&#8201;i.e. it was assumed that they would be used with parameters.</p>
</div>
<div class="paragraph">
<p>In version 3, you must add such generalized verbs to a common super-class, e.g. the pre-defined class <code>thing</code>.
Verbs inside classes or instances having no explicit syntax will receive a default syntax similar to the one in version 2:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;verb&gt; = &lt;verb&gt; (&lt;class&gt;).</pre>
</div>
</div>
<div class="paragraph">
<p>The default identifier for the parameter is the name of the class (or class of the instance) in which the verb was declared.</p>
</div>
<div class="paragraph">
<p>Version 3 assumes that global verbs (verbs outside of any class or instance) are intended to have no parameters.
Global verbs without an explicit syntax therefore receive the default syntax of:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;verb&gt; = &lt;verb&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Global verbs with parameters from pre-3 version source must be moved to an <code>Add To</code> clause for the appropriate class, usually <code>thing</code>, but if your verb handles literals you should move it to <code>string</code> or <code>integer</code>, as appropriate.</p>
</div>
<div class="paragraph">
<p>You can use the compiler switch <code>-infos</code> to see compiler messages indicating which verbs get which default syntaxes.</p>
</div>
</div>
<div class="sect2">
<h3 id="verbs_in_locations"><a class="anchor" href="#verbs_in_locations"></a>5.2. Verbs in Locations</h3>
<div class="paragraph">
<p>Verbs in locations were, in Alan v2, executed only when the hero was in them.
In v3, this is also true.
However, given the fact that location inherits from the same base class, <code>entity</code>, as objects and actors do, it may be beneficial to study the sections on the Alan v3 class hierarchy and how that affects the execution of verbs.</p>
</div>
</div>
<div class="sect2">
<h3 id="syntax_and_syntax_restrictions"><a class="anchor" href="#syntax_and_syntax_restrictions"></a>5.3. Syntax and Syntax Restrictions</h3>
<div class="paragraph">
<p>In version 2 it was possible to refer to the (single) parameter of a syntax construct using the predefined <code>OBJECT</code>, which was meant for use with default syntaxes.
In v3, this is no longer possible.
On the other hand, it is allowed to define a syntax that has &#8220;object&#8221; as the name of the parameter.</p>
</div>
<div class="paragraph">
<p>Version 2 allowed restrictions to list multiple classes in the same restriction clause:</p>
</div>
<div class="literalblock alan2">
<div class="content">
<pre>Syntax v = v (o)
Where o Isa Actor Or Object ...</pre>
</div>
</div>
<div class="paragraph">
<p>This is no longer possible; each clause must specify a single class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" lang="alan"><code class="language-alan" data-lang="alan"><span class="kr">Syntax</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="p">(</span><span class="n">o</span><span class="p">)</span><span class="w">
</span><span class="kr">Where</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="kr">Isa</span><span class="w"> </span><span class="nb">actor</span><span class="w"> </span><span class="kr">Else</span><span class="w"> </span><span class="p">...</span><span class="w">
</span><span class="kr">And</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="kr">Isa</span><span class="w"> </span><span class="nb">object</span><span class="w"> </span><span class="kr">Else</span><span class="w"> </span><span class="p">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The contorted example above illustrates the point.
Usually what needs to be done is a rephrasing so that the restriction actually refers to the common parent class of the two in the original:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" lang="alan"><code class="language-alan" data-lang="alan"><span class="kr">Syntax</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="p">(</span><span class="n">o</span><span class="p">)</span><span class="w">
</span><span class="kr">Where</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="kr">Isa</span><span class="w"> </span><span class="nb">Thing</span><span class="w"> </span><span class="p">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This will allow both actors and objects at that position.
If you want to still keep the multiple restrictions, note that successive restrictions should be progressively more restrictive, i.e. the class should be more specialised.</p>
</div>
<div class="paragraph">
<p>The analysis of the <code>ELSE</code>-part of a restriction clause was incomplete in version 2 and allowed the use of parameters in ways that was not actually safe.
This is improved in v3, possibly giving rise to errors in these clauses in games converted from v2.</p>
</div>
</div>
<div class="sect2">
<h3 id="syntax_synonyms"><a class="anchor" href="#syntax_synonyms"></a>5.4. Syntax Synonyms</h3>
<div class="paragraph">
<p>A feature often requested is action or verb synonyms.
In v3 this is possible.
By declaring multiple but different syntaxes for the same verb, they will in fact work as such:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" lang="alan"><code class="language-alan" data-lang="alan"><span class="kr">Syntax</span><span class="w"> </span><span class="n">give</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">give</span><span class="w"> </span><span class="p">(</span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="kr">Where</span><span class="w"> </span><span class="p">...</span><span class="w">
</span><span class="kr">Syntax</span><span class="w"> </span><span class="n">give</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">give</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">o</span><span class="p">).</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In v2 this was an error.
A usual remedy was often to use separate verbs (with each its own syntax) and list both (or all) in the verb declaration:</p>
</div>
<div class="literalblock alan2">
<div class="content">
<pre>VERB give, give_to ...</pre>
</div>
</div>
<div class="paragraph">
<p>This was troublesome, and incomplete, since in the above example the parameters are not in the same order.
Any such attempt should be replaced by the new feature, and multiple verbs in verb declarations avoided.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rules"><a class="anchor" href="#rules"></a>6. Rules</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The rules for rules has radically changed in Alan v3.
They are now triggered when the conditional <em>becomes</em> true.
They execute without location or actor, so <code>Current Location</code> and <code>Current Actor</code> is not defined.
Neither is <code>Here</code> and <code>Nearby</code>.
Output statements have no effect in rule bodies.</p>
</div>
<div class="paragraph">
<p>The best advice is to study the relevant parts of the manual carefully.
Consider the hints and tips that might be applicable to the problem rules were trying to solve.
And then experiment to find a way to implement the same thing.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="expressions"><a class="anchor" href="#expressions"></a>7. Expressions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="the_location_object_actor_variables"><a class="anchor" href="#the_location_object_actor_variables"></a>7.1. The LOCATION, OBJECT &amp; ACTOR Variables</h3>
<div class="paragraph">
<p>Version 2 had the three expressions <code>LOCATION</code>, <code>OBJECT</code> and <code>ACTOR</code>.
They referred to: the location where the execution was taking place, the first parameter in the current input, and the currently executing actor, respectively.</p>
</div>
<div class="paragraph">
<p>Those expressions are, obviously, not longer available.
The words are no longer keywords and the identifiers actor, object and location can now be used as any other identifier.
(Remember though that the language predefines them as classes corresponding to their previous semantics.)
The need to refer to the current actor (<code>ACTOR</code> expression) and the current location (<code>LOCATION</code> expression) remains and has, in V3, been replaced by two new expressions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Current Actor</code></p>
</li>
<li>
<p><code>Current Location</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The reference to the first parameter in a syntax declaration, using <code>object</code>, is not available except for verbs declared in an object without an explicit syntax.
(It will receive a default syntax, where the class name is the identifier for the first parameter.)</p>
</div>
</div>
<div class="sect2">
<h3 id="aggregates"><a class="anchor" href="#aggregates"></a>7.2. Aggregates</h3>
<div class="paragraph">
<p>Aggregates are functions that calculate values from sets of items.
In Alan v2, the <code>SUM</code>, <code>MAX</code> and <code>COUNT</code> aggregates worked on objects only.
You could only filter the objects aggregated to be only those at a location.</p>
</div>
<div class="paragraph">
<p>Alan V3 has generalized all aggregates to allow a list of filters.
The following is a V2 aggregate expression:</p>
</div>
<div class="literalblock alan2">
<div class="content">
<pre>IF COUNT HERE &gt; strength OF bridge THEN ...</pre>
</div>
</div>
<div class="paragraph">
<p>In order to be exactly equivalent in V3 it must be changed so that the aggregation is only performed over objects:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" lang="alan"><code class="language-alan" data-lang="alan"><span class="kr">If</span><span class="w"> </span><span class="kr">Count</span><span class="w"> </span><span class="kr">Isa</span><span class="w"> </span><span class="nb">object</span><span class="p">,</span><span class="w"> </span><span class="kr">Here</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">strength</span><span class="w"> </span><span class="kr">Of</span><span class="w"> </span><span class="n">Bridge</span><span class="w"> </span><span class="kr">Then</span><span class="w"> </span><span class="p">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Naturally, if you have made other changes to your code, this might need further analysis.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="miscellanea"><a class="anchor" href="#miscellanea"></a>8. Miscellanea</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="scripts"><a class="anchor" href="#scripts"></a>8.1. Scripts</h3>
<div class="paragraph">
<p>Version 3 only allows named script as opposed to the numbered scripts also allowed in v2.x.
A simple solution is to put a single character in front of the number.
A better solution is to invent descriptive names for the scripts instead.</p>
</div>
</div>
<div class="sect2">
<h3 id="multimedia"><a class="anchor" href="#multimedia"></a>8.2. Multimedia</h3>
<div class="paragraph">
<p>Alan v2 had no provisions for multimedia.
It has been reported that the <code>SYSTEM</code> statement has been used to some extent.
Alan v3 provides the <code>Show</code> statement to support graphics in a portable way.
Note that this might still not be available on all platforms.</p>
</div>
</div>
<div class="sect2">
<h3 id="include_directive"><a class="anchor" href="#include_directive"></a>8.3. Include directive</h3>
<div class="paragraph">
<p>In v3 <code>$include</code> has been replaced by the <code>import</code> statement.
They work the same, except that the new <code>import</code> statement can only be placed where declarations (classes, instances etc.) can occur.
This ensures a better structure of files contents, and aids in developing tools for analysis of Alan source.</p>
</div>
</div>
<div class="sect2">
<h3 id="messages"><a class="anchor" href="#messages"></a>8.4. Messages</h3>
<div class="paragraph">
<p>Most default messages given as a response to the player have changed from V2 to V3.
In V3 they all use the definite and indefinite features of course.
But the <code>Message</code> sections are also defined so that run-time parameters appropriate for attribute testing or printout are available.
The most significant change is that many of the identifiers for the messages have changed.
You should read the appropriate parts of the Alan Reference Manual for a list of V3 message identifiers.</p>
</div>
</div>
<div class="sect2">
<h3 id="new_features"><a class="anchor" href="#new_features"></a>8.5. New Features</h3>
<div class="paragraph">
<p>Of course, there are new features not available in v2, but these rarely affect porting source code from a v2 game, except where new keywords have been introduced in the language.
To retain V3 keywords as identifiers you need to quote them.
Another option is to replace them completely.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
ALAN 3.0beta2<br>
</div>
</div>
</body>
</html>